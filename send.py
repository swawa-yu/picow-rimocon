from machine import Pin
import time

# GP16ピンを入力に設定
input_pin = Pin(16, Pin.IN, Pin.PULL_UP)

# GP17ピンを出力に設定
led_pin = Pin(17, Pin.OUT)

# 信号データ（受信した配列）
signal_data = [
    3463,
    -1558,
    553,
    -284,
    545,
    -290,
    558,
    -292,
    546,
    -296,
    545,
    -293,
    545,
    -293,
    555,
    -1144,
    556,
    -298,
    558,
    -292,
    544,
    -293,
    546,
    -266,
    584,
    -254,
    582,
    -293,
    544,
    -294,
    546,
    -292,
    558,
    -301,
    545,
    -293,
    557,
    -281,
    556,
    -1122,
    581,
    -281,
    557,
    -1143,
    559,
    -279,
    559,
    -256,
    582,
    -305,
    555,
    -280,
    559,
    -292,
    545,
    -268,
    568,
    -292,
    557,
    -291,
    546,
    -291,
    548,
    -291,
    557,
    -1159,
    557,
    -1146,
    544,
    -1157,
    545,
    -268,
    568,
    -1156,
    545,
    -292,
    547,
    -292,
    557,
    -1145,
    545,
    -303,
    558,
    -1144,
    556,
    -293,
    546,
    -294,
    546,
    -292,
    546,
    -292,
    558,
    -293,
    544,
    -294,
    545,
    -303,
    559,
    -280,
    558,
    -292,
    547,
    -269,
    570,
    -1144,
    558,
    -290,
    547,
    -1146,
    557,
    -292,
    546,
    -1168,
    547,
    -292,
    545,
    -1156,
    544,
    -294,
    545,
    -1158,
    544,
    -292,
    546,
    -1156,
    547,
    -1143,
    558,
    -1156,
    558,
    -1145,
    543,
    -1154,
    546,
    -269,
    581,
    -257,
    583,
    -293,
    544,
    -267,
    570,
    -292,
    558,
    -304,
    545,
    -291,
    545,
    -293,
    557,
    -291,
    546,
    -293,
    544,
    -293,
    559,
    -280,
    557,
    -267,
    569,
    -305,
    556,
    -292,
    544,
    -292,
    559,
    -279,
    557,
    -1144,
    557,
    -293,
    545,
    -1155,
    545,
    -1143,
    546,
    -291,
    570,
    -292,
    544,
    -293,
    557,
    -267,
    568,
    -292,
    557,
    -280,
    556,
    -292,
    544,
    -293,
    557,
    -304,
    547,
    -267,
    583,
    -254,
    583,
    -290,
    547,
    -292,
    544,
    -294,
    546,
    -304,
    544,
    -293,
    545,
    -306,
    555,
    -1146,
    544,
    -293,
    556,
    -270,
    568,
    -292,
    545,
    -268,
    579,
    -291,
    545,
    -291,
    558,
    -308,
    543,
    -292,
    546,
    -294,
    556,
    -281,
    556,
    -294,
    545,
    -291,
    546,
    -291,
    556,
    -294,
    543,
    -305,
    557,
    -256,
    582,
    -269,
    570,
    -291,
    558,
    -257,
    582,
    -292,
    545,
    -269,
    567,
    -293,
    555,
    -305,
    546,
    -294,
    546,
    -270,
    580,
    -280,
    557,
    -268,
    569,
    -269,
    581,
    -1144,
    546,
    -294,
    543,
    -314,
    546,
    -294,
    544,
    -291,
    556,
    -293,
    546,
    -290,
    559,
    -280,
    557,
    -293,
    546,
    -291,
    557,
    -291,
    558,
    -1144,
    555,
    -1143,
    557,
    -1144,
    545,
    -267,
    581,
    -1144,
    556,
    -293,
    546,
    -1145,
    558,
    -294,
    570,
]


# 信号を送信する関数
def send_signal(signal):
    for duration in signal:
        if duration > 0:
            led_pin.on()
        else:
            led_pin.off()
        time.sleep_us(abs(duration))


# メインプログラム
while True:
    if input_pin.value() == 1:
        send_signal(signal_data)
        time.sleep(2)  # 2秒待つ
    else:
        led_pin.off()
        time.sleep(0.1)  # 100msごとに状態をチェック
